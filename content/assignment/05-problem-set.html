---
title: "Assignment 7: Tidyverse, data manipulation"
date: "2021-09-22"
due_date: "2021-09-29"
due_time: "05:00 PM"
menu:
  assignment:
    parent: Assignments
    weight: 7
type: docs
weight: 1
output:
  blogdown::html_page:
    toc: true
editor_options: 
  chunk_output_type: console
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>

<div id="TOC">
<ul>
<li><a href="#to-do-yourself">To do yourself</a>
<ul>
<li><a href="#dplyr">dplyr</a></li>
<li><a href="#ggplot2">ggplot2</a></li>
</ul></li>
<li><a href="#to-submit-on-blackboard-due-10-20-2020-500pm">To submit on blackboard, due 10-20-2020, 5:00pm</a>
<ul>
<li><a href="#dplyr-1">dplyr</a></li>
<li><a href="#ggplot2-1">ggplot2</a></li>
</ul></li>
</ul>
</div>

<div id="to-do-yourself" class="section level1">
<h1>To do yourself</h1>
<div id="dplyr" class="section level3">
<h3>dplyr</h3>
<ul>
<li><p>Read Wickham, Hadley, et al. “<a href="https://joss.theoj.org/papers/10.21105/joss.01686">Welcome to the Tidyverse</a>.” Journal of Open Source Software, 2019, or Wickham, Hadley. “<a href="https://www.jstatsoft.org/article/view/v059i10">Tidy data</a>.” Journal of Statistical Software, 2014</p></li>
<li><p><a href="https://spielmanlab.github.io/introverse/index.html">introverse</a> - alternate documentation for commonly-used functions and concepts in Base R and in the tidyverse. <a href="https://twitter.com/stephspiel/status/1430200830527950856?s=20">Tweet</a></p></li>
<li><p><a href="https://www.kaggle.com/jessemostipak/dive-into-dplyr-tutorial">Dive into dplyr (tutorial)</a></p></li>
<li><p><a href="https://ramnarasimhan.files.wordpress.com/2014/10/data-manipulation-using-r_acm2014.pdf">Data Manipulation Using R (&amp; dplyr)</a> by Ram Narasimhan, PDF slides</p></li>
<li><p><a href="http://datascienceplus.com/data-manipulation-with-dplyr/">Data Manipulation with dplyr</a> brief tutorial</p></li>
<li><p><a href="http://www.datacarpentry.org/R-genomics/04-dplyr.html">Aggregating and analyzing data with dplyr</a> tutorial by Data Carpentry</p></li>
<li><p><a href="https://rpubs.com/justmarkham/dplyr-tutorial">Introduction to dplyr for Faster Data Manipulation in R</a> tutorial and a 40 min video <a href="https://www.youtube.com/watch?v=jWjqLW-u3hc">Hands-on dplyr tutorial for faster data manipulation in R</a></p></li>
<li><p><a href="https://github.com/gadenbuie/tidy-animated-verbs">Animations of tidyverse verbs using R, the tidyverse, and gganimate</a> - visual explanation of dplyr operations</p></li>
<li><p><a href="https://tidyr.tidyverse.org/dev/articles/pivot.html">Pivoting, reformatting data into long/wide formats</a></p></li>
<li><p><a href="https://speakerdeck.com/yutannihilation/a-graphical-introduction-to-tidyrs-pivot-star">A graphical introduction to tidyr’s pivot</a></p></li>
<li><p><a href="https://speakerdeck.com/lionelhenry/reusing-tidyverse-code">Reusing Tidyverse code</a> - dplyr/tidyverse data manipulation lecture slides</p></li>
</ul>
</div>
<div id="ggplot2" class="section level3">
<h3>ggplot2</h3>
<ul>
<li><p>O’Donoghue, Sen I., Benedetta Frida Baldi, Susan J. Clark, Aaron E. Darling, James M. Hogan, Sandeep Kaur, Lena Maier-Hein, et al. “<a href="https://doi.org/10.1146/annurev-biodatasci-080917-013424">Visualization of Biomedical Data</a>.” Annual Review of Biomedical Data Science 1, no. 1 (July 20, 2018) - Visualization best practices (the use of length, area, color etc.)</p></li>
<li><p><a href="https://github.com/rstudio/webinars">RStudio Webinars</a> - Code and slides for RStudio webinars
<!--
- [Data visualization in R](http://www.datacarpentry.org/R-genomics/05-data-visualization.html) by Data Carpentry
--></p></li>
<li><p><a href="https://github.com/jennybc/ggplot2-tutorial">ggplot2 tutorial/slides/code examples/references</a> by Jenny Bryan</p></li>
<li><p><a href="http://www.r-graph-gallery.com/all-graphs/">The R Graph Gallery, all graphs</a> with code</p></li>
<li><p><a href="https://github.com/Z3tt/ggplot-courses">Collection of ggplot2 materials</a></p></li>
<li><p><a href="https://github.com/gadenbuie/gentle-ggplot2">A Gentle Guide to the Grammar of Graphics with ggplot2</a> by Garrick Aden-Buie</p></li>
<li><p><a href="https://geanders.github.io/RProgrammingForResearch/reporting-data-results-1.html">Plotting/reporting best practices</a></p></li>
</ul>
</div>
</div>
<div id="to-submit-on-blackboard-due-10-20-2020-500pm" class="section level1">
<h1>To submit on blackboard, due 10-20-2020, 5:00pm</h1>
<div id="dplyr-1" class="section level3">
<h3>dplyr</h3>
<ul>
<li><p>What is the difference between <code>read_xls()</code> and <code>read_xlsx()</code> functions? What message do you get if reading an <code>.xlsx</code> file using <code>read_xls()</code> function?</p></li>
<li><p>What does the skip argument do?</p></li>
<li><p>Do we need to refer to a sheet within an excel file as a number, or can we refer to it as the sheet name instead?</p></li>
<li><p>What does the guess_max argument do?</p></li>
<li><p>What happens if columns in the Excel worksheet are of different length?</p></li>
<li><p>How would you write into an Excel file? Demonstrate saving the <code>mtcars</code> dataset into an Excel file.</p></li>
<li><p>Use the <code>starwars</code> dataset that is loaded with the tidyverse. Accomplish the following in one long string of pipes.</p>
<ul>
<li>Keep only observations with weight and height recorded.</li>
<li>Create a variable called <code>bmi</code> that calculates the character’s BMI (search for formula).</li>
<li>Summarize the BMI variable, grouping observations by homeworld.</li>
<li>Print this summary in decreasing order of average BMI.</li>
</ul></li>
<li><p>Read in the following data into R. This data is from the American Community Survey and references the population of three cities in Virginia between 2009 and 2012.
<code>cities &lt;- data.frame(name = rep(c("richmond", "norfolk", "charlottesville")), pop2009 = c(1202494,236071,191515), pop2010 = c(1235565,242143,197279), pop2011 = c(1248271,241943,199675), pop2012 = c(1260202,243056,210909))</code>
In one long string of pipes, convert the data from wide (2009 to 2012 population values) to long format, naming the new column of populations <code>pop</code>, group by city, create a summary variable that is the ratio of the largest population value to smallest population value for the city, and arrange by this ratio value in decreasing order.</p></li>
</ul>
</div>
<div id="ggplot2-1" class="section level3">
<h3>ggplot2</h3>
<!--
- We will start with a very basic ggplot. Read in the `mtcars` dataset that comes with R. Produce a histogram of the MPG variable for each value of the cylinders variable (there are 3) in a 1 row by 3 column grid. You may notice that the plots appear 'sideways'. If so, correct it using a ggplot command. Give the plot an informative title.

- Read in the `diamonds` dataset in R. In one long string of pipe operations, keep only those observations with `price` less than the 80th percentile of the `price` variable, group observations by `Clarity` type, and create a summary dataframe that summarizes the median `price` in one column and summarizes the median `x` value in another column. Using this dataset, create a ggplot scatterplot with `x` on the x-axis and `price` on the y-axis. Label the plot with values of Clarity and adjust the labels slightly so that they do not overlap the points.

- Again using the `diamonds` dataset, starting from the full dataset. First remove all diamonds with an 'Ideal' cut. Then make a ggplot of the data that displays the density estimate of price for each of the (now 4) values of cut, separately, arranged in a 4 row by 1 column grid. Fill in the area below the density curve in each plot with some color. Give the plot a title. 
-->
<ul>
<li><p>Get names of all packages installed on your computer, check the <code>installed.packages()</code> function. Split package names into characters. Calculate frequency of each letter, case sensitive. Create a horizontal barplot, Y-axis - letters/characters, X-axis - frequency. Make it sorted, so the most frequently occurring letters (highest bars) are on top. Color each bar by its own color. Do not output legend.</p></li>
<li><p>Download the CDC US Birth dataset from <a href="https://github.com/fivethirtyeight/data/tree/master/births" class="uri">https://github.com/fivethirtyeight/data/tree/master/births</a>. Answer the following questions:</p>
<ul>
<li>Make barplots of most-to-least popular a) day of week, b) day of month, c) month to give birth, irrespectively of year. X-axis - date, Y-axis - number of births. Color by date</li>
<li>Visually demonstrate the total birth trend over the years. X-axis - years, Y-axis - total number of births per year.</li>
<li>For each a) day of week, b) day of month, c) month, collect the number of births, irrespectively of year. Plot them as a) scatterplots, b) boxplots, with X-axis being the corresponding data and Y-axis - the number of births. For scatterplots, fit a smoothing line with the default nonlinear fit. Color by date.</li>
<li>Bonus question: Make the time series curve similar to the second plot of the <a href="https://fivethirtyeight.com/features/some-people-are-too-superstitious-to-have-a-baby-on-friday-the-13th/">accompanying article</a>.</li>
</ul></li>
</ul>
</div>
</div>
